# سیستم مدیریت هزینه‌ها (Expense Flow)

سیستم مدیریت هزینه‌ها یک اپلیکیشن وب مبتنی بر Laravel و Livewire برای مدیریت فرآیند درخواست، بررسی و تایید هزینه‌های
سازمانی است. این سیستم با هدف مدیریت گردش کار درخواست‌های هزینه از مرحله ثبت توسط کارمند تا تایید نهایی برای پرداخت
طراحی شده است.

## ویژگی‌های اصلی

- **ثبت درخواست هزینه**: امکان ثبت درخواست هزینه با آپلود تصویر فاکتور
- **تشخیص خودکار بانک**: استخراج نام بانک از شماره شبا
- **سطوح دسترسی متفاوت**: پشتیبانی از چهار نقش کاربری (کارمند، منابع انسانی، مالی، مدیر)
- **گردش کار تایید**: فرآیند دو مرحله‌ای تایید درخواست‌ها توسط منابع انسانی و مالی
- **سیستم نوتیفیکیشن**: اطلاع‌رسانی تغییر وضعیت درخواست‌ها
- **خروجی اکسل**: امکان دریافت خروجی اکسل از درخواست‌های تایید شده برای ارسال به بانک

## پیش‌نیازها

- PHP >= 8.1
- MySQL >= 8.0
- Composer
- Node.js و NPM
- افزونه PHP GD (برای پردازش تصاویر)

## نصب و راه‌اندازی

1. **کلون کردن مخزن**

```bash
git clone https://github.com/your-username/expense-flow.git
cd expense-flow
```

2. **نصب وابستگی‌ها**

```bash
composer install
npm install
```

3. **تنظیم فایل .env**

```bash
cp .env.example .env
php artisan key:generate
```

سپس فایل `.env` را ویرایش کرده و اطلاعات پایگاه داده را وارد کنید.

4. **اجرای مهاجرت‌ها و سیدرها**

```bash
php artisan migrate
php artisan db:seed
```

5. **ایجاد لینک به فضای ذخیره‌سازی**

```bash
php artisan storage:link
```

6. **کامپایل asset ها**

```bash
npm run build
```

7. **اجرای سرور توسعه**

```bash
php artisan serve
```

## کاربران پیش‌فرض

پس از اجرای سیدرها، می‌توانید با استفاده از کاربران زیر وارد سیستم شوید:

- **مدیر سیستم**: admin@example.com / admin123456
- **منابع انسانی**: hr@example.com / hr123456
- **واحد مالی**: finance@example.com / finance123456
- **کارمند**: employee@example.com / employee123456

## ساختار پروژه

- **app/Models**: مدل‌های پایگاه داده (User, ExpenseRequest)
- **app/Services**: سرویس‌های کاربردی (IbanService)
- **app/Livewire**: کامپوننت‌های Livewire برای بخش‌های مختلف
- **app/Http/Controllers**: کنترلرها
- **app/Http/Middleware**: میدلورها از جمله کنترل دسترسی
- **app/Notifications**: کلاس‌های نوتیفیکیشن

## گردش کار

1. **کارمند** درخواست هزینه را با تصویر فاکتور ثبت می‌کند
2. درخواست به **منابع انسانی** ارجاع می‌شود
3. پس از تایید منابع انسانی، درخواست به **واحد مالی** ارجاع می‌شود
4. واحد مالی پس از تایید نهایی، درخواست را برای پرداخت آماده می‌کند
5. امکان ارسال خروجی اکسل به بانک وجود دارد

## تکنولوژی‌ها

- **Laravel**: فریم‌ورک اصلی پروژه
- **Livewire**: برای ایجاد رابط کاربری تعاملی بدون نیاز به جاوااسکریپت پیچیده
- **Bootstrap**: برای استایل‌دهی و رابط کاربری
- **PhpSpreadsheet**: برای ایجاد خروجی اکسل
